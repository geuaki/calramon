<%- layout('layouts/main.ejs') %>
<div class="container">
    <h1>Verdura</h1>
    <div class="container p-4">
        <% if(products.length == 0) { %>
        
            <div class="alert alert-danger">
                <p>Ara mateix no tenim productes de Verdura, torni mes tard o explori altres seccions.</p>
            </div>
        
        <% } else { %>
            <div class="row justify-content-center">
                <div class="card-columns">
                    <% products.forEach(function(product) {%>
                        <div class="col-sm-11">
                        <div class="card">
                            <a href="/producte/<%= product._id %>">
                                <img src="<%= product.image.path %>" class="card-img-top">
                            </a>
                            <div class="card-body">
                                <h5 class="card-title"><%= product.name %></h5>
                                <% if(product.isKilogram == true) { %>
                                    <p>Pes: <%= product.weight %>Kg</p>
                                <% } else { %>
                                    <p>Unitat: <%= product.unit %></p>
                                <% } %>
                                <p>Preu: <%= product.price %>€</p>
                                <% if(product.quantity <= 0) { %>
                                    <p>Ens hem quedat sense existències</p>
                                <% } else { %>
                                    <p>Quantitat: <%= product.quantity %> restants</p>
                                <% } %>
                                <% if(product.isKilogram == true) { %>
                                    <% if(product.quantity > 0) { %>
                                        <div class="input-group">
                                            <span class="input-group-btn">
                                                <button type="button" class="btn btn-danger btn-number"  data-type="minus" data-field="quant[2]">
                                                <span class="glyphicon glyphicon-minus"></span>
                                                </button>
                                            </span>
                                            <input type="text" name="quant[2]" class="form-control input-number" value="10" min="1" max="100">
                                            <span class="input-group-btn">
                                                <button type="button" class="btn btn-success btn-number" data-type="plus" data-field="quant[2]">
                                                    <span class="glyphicon glyphicon-plus"></span>
                                                </button>
                                            </span>
                                        </div>
                                    <% } %>
                                <% } else { %>
                                    <% if(product.quantity > 0) { %>
                                        <div class="btn-group btn-group-toggle" data-toggle="buttons">
                                            <% if(product.quantity >= 1) { %>
                                                <label class="btn btn-secondary active">
                                                    <input type="radio" name="options" id="option1" autocomplete="off" checked>1
                                                </label>
                                            <% } %>
                                            <% if(product.quantity >= 2) { %>
                                                <label class="btn btn-secondary">
                                                    <input type="radio" name="options" id="option2" autocomplete="off"> 2
                                                </label>
                                            <% } %>
                                            <% if(product.quantity >= 3) { %>
                                                <label class="btn btn-secondary">
                                                    <input type="radio" name="options" id="option3" autocomplete="off"> 3
                                                </label>
                                            <% } %>
                                            <% if(product.quantity >= 4) { %>
                                                <label class="btn btn-secondary">
                                                    <input type="radio" name="options" id="option4" autocomplete="off"> 4
                                                </label>
                                            <% } %>
                                            <% if(product.quantity >= 5) { %>
                                                <label class="btn btn-secondary">
                                                    <input type="radio" name="options" id="option5" autocomplete="off"> 5
                                                </label>
                                            <% } %>
                                        </div>
                                    <% } %>
                                <% } %>
                                <% if(product.quantity <= 0) { %>
                                    <div>
                                        <button type="button" class="btn btn-primary mt-3" disabled>Esgotat</button>
                                    </div>
                                <% } else { %>
                                    <div>
                                        <button type="button" class="btn btn-primary mt-3" >Afegir al cistell</button>
                                    </div>
                                <% } %>
                            </div>
                        </div>
                        </div>
                    <% }) %>
                </div>
            </div>
        <% } %>
    </div>
</div>
